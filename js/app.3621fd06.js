(function(e){function t(t){for(var a,i,l=t[0],s=t[1],d=t[2],u=0,f=[];u<l.length;u++)i=l[u],Object.prototype.hasOwnProperty.call(n,i)&&n[i]&&f.push(n[i][0]),n[i]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);c&&c(t);while(f.length)f.shift()();return o.push.apply(o,d||[]),r()}function r(){for(var e,t=0;t<o.length;t++){for(var r=o[t],a=!0,l=1;l<r.length;l++){var s=r[l];0!==n[s]&&(a=!1)}a&&(o.splice(t--,1),e=i(i.s=r[0]))}return e}var a={},n={app:0},o=[];function i(t){if(a[t])return a[t].exports;var r=a[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=e,i.c=a,i.d=function(e,t,r){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)i.d(r,a,function(t){return e[t]}.bind(null,a));return r},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var d=0;d<l.length;d++)t(l[d]);var c=s;o.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},"034f":function(e,t,r){"use strict";var a=r("85ec"),n=r.n(a);n.a},"56d7":function(e,t,r){"use strict";r.r(t);r("0fae");var a=r("9e2f"),n=r.n(a),o=(r("e260"),r("e6cf"),r("cca6"),r("a79d"),r("2b0e")),i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{attrs:{id:"app"}},[e._m(0),r("div",{staticClass:"aside"},[r("video",{attrs:{id:"beforVideo",width:"100%",height:"40%",src:e.videoAddress,controls:e.controls}}),r("div",{attrs:{id:"setting"}},[r("div",{attrs:{id:"uploadFile"}},[r("input",{attrs:{id:"img-upload",type:"file",accept:"video/*"},on:{change:e.uploadGetInformation}}),r("label",{attrs:{for:"img-upload"}},[r("el-button",{attrs:{type:"primary"}},[e._v("上传文件")])],1)]),r("el-form",{ref:"form",attrs:{model:e.form}},[r("el-form-item",{attrs:{label:"模式选择:"}},[r("el-radio-group",{on:{change:e.modeSelect},model:{value:e.form.resource,callback:function(t){e.$set(e.form,"resource",t)},expression:"form.resource"}},[r("el-radio",{attrs:{label:"0"}},[e._v("灰色模式")]),r("el-radio",{attrs:{label:"1"}},[e._v("黑白模式")])],1)],1)],1),r("div",{staticClass:"block"},[r("div",[e._v("阈值:(黑白模式下使用)")]),r("el-slider",{attrs:{"show-input":"",max:255},model:{value:e.thresholdRange,callback:function(t){e.thresholdRange=t},expression:"thresholdRange"}})],1),e._m(1)],1)])])},l=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main"},[r("canvas",{staticClass:"canvas",attrs:{id:"canvas"}})])},function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",[e._v("使用说明：")]),r("div",[e._v("上传本地文件->点击右侧视频播放->参数随便调调。（左侧是实时转换效果）")])])}],s=(r("a9e3"),r("ac1f"),r("466d"),{name:"app",data:function(){return{videoAddress:void 0,controls:"controls",form:{resource:""},thresholdRange:128,scale:0}},methods:{uploadGetInformation:function(e){var t=this,r=e.target.files[0],a=new FileReader;r.type.match("video.*")?(a.readAsDataURL(r),a.onload=function(e){t.videoAddress=e.target.result,t.animetionFrame()}):this.$message({message:"文件格式不对哦。",type:"warning"})},animetionFrame:function(e){var t=document.getElementById("beforVideo"),r=document.getElementById("canvas"),a=r.getContext("2d"),n=this,o=0===n.scale?1:.01*n.scale,i=0,l=0;console.log(t.videoWidth),i=r.width*o,l=r.height*o,requestAnimationFrame((function(){a.drawImage(t,0,0,i/o,l/o),console.log(r.height/o);var s=a.getImageData(0,0,r.width*o,r.height*o);switch(a.imageSmoothingEnabled=!1,a.mozImageSmoothingEnabled=!1,a.webkitImageSmoothingEnabled=!1,a.msImageSmoothingEnabled=!1,e){case"0":n.grayProcess(s,r);break;case"1":n.colorAndBlackWriteMode(s,n.thresholdRange,e);break;case"2":n.colorAndBlackWriteMode(s,n.thresholdRange,e);break}a.putImageData(s,0,0),n.animetionFrame(e)}))},modeSelect:function(e){this.animetionFrame(e)},grayProcess:function(e,t){for(var r=e.data,a=0;a<t.height;a++)for(var n=0;n<t.width;n++){var o=Math.floor((r[4*(a*t.width+n)]+r[4*(a*t.width+n)+1]+r[4*(a*t.width+n)+2])/3);r[4*(a*t.width+n)]=r[4*(a*t.width+n)+1]=r[4*(a*t.width+n)+2]=o}},colorAndBlackWriteMode:function(e,t,r){var a=e.data;r=Number(r);for(var n=0;n<a.length;n+=4){var o=a[n],i=a[n+1],l=a[n+2],s=a[n+3],d=.299*a[n]+.587*a[n+1]+.114*a[n+2],c=d>=t?255:0;a[n]=2==r&&2==c?o:c,a[n+1]=2==r&&2==c?i:c,a[n+2]=2==r&&2==c?l:c,a[n+3]=s>=t?255:0}}}}),d=s,c=(r("034f"),r("2877")),u=Object(c["a"])(d,i,l,!1,null,null,null),f=u.exports;o["default"].use(n.a),new o["default"]({el:"#app",render:function(e){return e(f)}})},"85ec":function(e,t,r){}});
//# sourceMappingURL=app.3621fd06.js.map